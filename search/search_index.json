{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home Assistant The project is the beginning of a new way of living. Where I would like to create an automated house capable of understanding my family behaviour and react to the needs of everyone to facilitate our life at home. The document will describe what I would like for my family and different house area. Moreover the different technology I am able to use, test I did to best fit our needs. Links and information to keep Self hosted list of service Websocket https://github.com/tripleee/websocketd-alpine https://github.com/joewalnes/websocketd Specification and Requirements Mural Requirements I want to use new technology in a containarized environnement Use of kubernetes if possible to also learn K8S on a personnal project Vocal system to execution automation and task Low powered system to hosts the platform (e.g raspberry) Specification: A reliable hardware infrastructure to host all the system A secured software plateform easy to run, maintain A backup and recovery system A security Alarm and Camera A secured network where I can have a good bandwith for internet, gaming, movie and another dedicated local dedicated network to mangage devices I want to be able to talk to the system, it needs to understand Polish and French language. I need the least effort to integrate sensors and devices If possible I would like to integrate all data to a single bus where I can ingest data, listen, and automate task If the system can stay secured locally and no data sent to the cloud, it is a plus. Ability to send a reminder that desktop is ON upstairs and nothing moved for the last X hous or minutes to save energy bill. Ideas provided by Joanna The system should discovere himself who left the bed in the morning Find a solution to indicate your mood / to change the music in the morning or add a orange juice to your coffee. Light during the night detected by presence to go to the toilet with a light dimmer maybe ? Voicie calendar assistant that tells you RDV and task reminder (\"time to buy christamas present\") Smart mirror that give you the weather System able to match the purfum with the weather Wardrobe assistant to match weather Water in the shower is nearly cold so please wake up Wake up dynamically depending on calendar task of the family and Breakfast assistant depending on what's in the fridge Shopping list assistant Key detector inside the car, to stop forgetting keys in the car Door detector to make sure all is closed when leaving/going to bed Miror to compliment my beauty :) System that assist baby when he wakes up before parents, with light or a tv program or something else Mirror that tell me to shave my beard Security system on demand that record movement outside the house with 7 days retention GPS tracking The system has to be zone tracking instead of continuous tracking Adult zone tracking Home zone, to notify when we are at home Kids zone tracking Notify when kids are at home, school area, friends house, sport area Health for kids - Can we track emotional behaviour of the kid ? If hearbit to high, expecting call from school ? Christmas mode(scene) : House with christmas music and light starting in the morning Push notification when new informations from school Architecture A home assistant can be a wide topic and cover a lot of area but I will maintain the scope to the following that are in my requirements: An Infrastructure to host all these developpements plateform (probably raspberry pi and K3S cluster) A docker environment to easily manage all software stack present in the infrastructure A backup and receovry system, to maintain sustanbility over time and reduce human errors. A security system Alarm and Camera A secured network using a VPN ? A hub to manage devices and create automation. A vocal assistant to recognise different language and translate voice to task, script and automation Devices to take remote actions Sensors to acquire the signal Home Energy Management","title":"Home"},{"location":"#home-assistant","text":"The project is the beginning of a new way of living. Where I would like to create an automated house capable of understanding my family behaviour and react to the needs of everyone to facilitate our life at home. The document will describe what I would like for my family and different house area. Moreover the different technology I am able to use, test I did to best fit our needs.","title":"Home Assistant"},{"location":"#links-and-information-to-keep","text":"Self hosted list of service Websocket https://github.com/tripleee/websocketd-alpine https://github.com/joewalnes/websocketd","title":"Links and information to keep"},{"location":"#specification-and-requirements","text":"Mural","title":"Specification and Requirements"},{"location":"#requirements","text":"I want to use new technology in a containarized environnement Use of kubernetes if possible to also learn K8S on a personnal project Vocal system to execution automation and task Low powered system to hosts the platform (e.g raspberry)","title":"Requirements"},{"location":"#specification","text":"A reliable hardware infrastructure to host all the system A secured software plateform easy to run, maintain A backup and recovery system A security Alarm and Camera A secured network where I can have a good bandwith for internet, gaming, movie and another dedicated local dedicated network to mangage devices I want to be able to talk to the system, it needs to understand Polish and French language. I need the least effort to integrate sensors and devices If possible I would like to integrate all data to a single bus where I can ingest data, listen, and automate task If the system can stay secured locally and no data sent to the cloud, it is a plus. Ability to send a reminder that desktop is ON upstairs and nothing moved for the last X hous or minutes to save energy bill. Ideas provided by Joanna The system should discovere himself who left the bed in the morning Find a solution to indicate your mood / to change the music in the morning or add a orange juice to your coffee. Light during the night detected by presence to go to the toilet with a light dimmer maybe ? Voicie calendar assistant that tells you RDV and task reminder (\"time to buy christamas present\") Smart mirror that give you the weather System able to match the purfum with the weather Wardrobe assistant to match weather Water in the shower is nearly cold so please wake up Wake up dynamically depending on calendar task of the family and Breakfast assistant depending on what's in the fridge Shopping list assistant Key detector inside the car, to stop forgetting keys in the car Door detector to make sure all is closed when leaving/going to bed Miror to compliment my beauty :) System that assist baby when he wakes up before parents, with light or a tv program or something else Mirror that tell me to shave my beard Security system on demand that record movement outside the house with 7 days retention GPS tracking The system has to be zone tracking instead of continuous tracking Adult zone tracking Home zone, to notify when we are at home Kids zone tracking Notify when kids are at home, school area, friends house, sport area Health for kids - Can we track emotional behaviour of the kid ? If hearbit to high, expecting call from school ? Christmas mode(scene) : House with christmas music and light starting in the morning Push notification when new informations from school","title":"Specification:"},{"location":"#architecture","text":"A home assistant can be a wide topic and cover a lot of area but I will maintain the scope to the following that are in my requirements: An Infrastructure to host all these developpements plateform (probably raspberry pi and K3S cluster) A docker environment to easily manage all software stack present in the infrastructure A backup and receovry system, to maintain sustanbility over time and reduce human errors. A security system Alarm and Camera A secured network using a VPN ? A hub to manage devices and create automation. A vocal assistant to recognise different language and translate voice to task, script and automation Devices to take remote actions Sensors to acquire the signal Home Energy Management","title":"Architecture"},{"location":"featurehassio/","text":"Feature test Rhasspy https://rhasspy.readthedocs.io/en/latest/ Installation via docker on a Linux server is easy, on a windows docker platform, I haven't been able to make it start (need a profile that I don't know how to include in the command). For the rest, the tool is an aggregation of different tools that provide each a functionality : - Speak to text - Text to speech - Audio input - Audio output - Wake word The tool itself looks nice and we can create sentences that can be recognized by rhasspy and perform an action. I couldn't make the microphone and audio work so impossible to test at the moment. I realize that microphone has to be plugged in where the docker rhasspy server is hosted. Need troubleshooting audio input. Home Assistant installation Virtual Machine I tried Home Assistant on docker version. And it is very easy to install : https://www.home-assistant.io/installation/ But I realized that I am not able with docker version to access addons. Addons is only avaialbe when installing Home Assistant as a VM (Kvm, vmware, virtualbox) or via the raspberry installer. That's probably why there is so much people installing HA from RP4. I continued my search on Vmware home assistant, the VM version is quite complex to install, need to follow this steps : Download Home Assistant .VMDK image Download the Vmware Workstation (.vmdk) image from here: https://www.home-assistant.io/installation/windows The file will be download as a file with a .xz extension which needs to be extracted. To extract it: Download 7zip. Right-click the hass_ova-5.12.vmdk.xz file you just downloaded > 7zip > Open Archive. Then, click Extract. It should extract to a .vmdk file. Rename the file to something like homeassistant.vmdk, and place it into a directory where your VM will live (C:\\HomeAssistant) Step 3: Launch VMware Workstation 16 Player Search your computer for VMware Workstation 16 Player and open. Select the free for non-commercial use option. Click Create a New Virtual Machine Click I will install the operating system later. Select Linux. For the version, you would use Other Linux 5.x and later kernel 64-bit. Give your VM a name (like homeassistant) and select the folder you created in Step 2. Store it as a single file, and set your storage size. I chose 20gb. On the next screen, click Customize Hardware. Memory and CPU can be specified to whatever you want (1gb of RAM and 1CPU is recommended), but the network adapter needs to be set to \u201cbridged\u201d mode. Memory: 2048 CPU: 2 Network Adapter: Choose \u201cBridged\u201d Your VM should now be created. Step 4: Edit VM Settings Navigate back to the C:\\HomeAssistant folder. You will now see two .vmdk files: Delete the homeassistant-0 one (the newly created .VMDK), and rename the homeassistant one to homeassistant-0 (this is the extracted image you downloaded). Then, locate the homeassistant VMware virtual machine configuration file (.vmx). Right-click > Open With > notepad. Under the .encoding line, add the following code and save the file. firmware=\"efi\" Step 5: Start the Virtual Machine Then, click Play Virtual machine or click the green triangle at the top of the window. If you see this message, click Yes. Download and install VMTools. I\u2019m not entirely sure if this was necessary, but I did it anyway: If everything is successful up until this point, you should see the Home Assistant login screen in a command window like below. The default username is root. Logging in will show you your IP address of your new HA virtual machine. In my case, it is 192.168.68.128. It\u2019s not necessary to login if you can get your IP from your router. At this step, you should be able to navigate to http://192.168.68.128:8123 in a web browser. The HA gui will state that it may take up to 20 minutes to complete, but in my experience it took less than 5. While you are waiting, remove your Nortek GoControl zwave/zigbee USB stick from your raspberry pi and plug it into your Windows 10 PC that has VM Workstation Player installed. Windows should detect it automatically and install all necessary drivers. The VMware VM should automatically detect it as well: Once the \u201cit may take 20 minutes to complete\u201d screen goes away, you will see the New User Account screen like the screenshot below. I am restoring from a previous snapshot, so I\u2019m going to choose Alternatively, you can restore from a previous snapshot. After restoring from snapshot, you may notice all of your wifi devices work \u2013 but zwave and zigbee devices don\u2019t. This is because we need to \u201cattach\u201d the Nortek USB dongle to the vm (referred to as USB passthrough). To do this, on the VMware Player window, select Player > Removeable Devices. There should be two Silicon devices. Click each of them > Connect. Testing It Out If all has gone well so far, you can now test things out. Toggle a few lights, switches, and motion sensors. If you have any secure nodes, like a smart door lock, you should test those as well. The last thing you\u2019ll need to do is either the change the internal IP address in your Home Assistant Mobile app (under App Configuration in the sidebar) or change the IP address of your VM to the old IP address. Wrapping Up All in all, I spent entirely too much time trying to figure out all the nuances of getting this working, particularly extracting the .vmdk file, deleting the old .vmdk, and then discovering that I needed to edit the .vmx file to allow it to secure boot. So, I decided to document each step of the process as I went, with the hopes that it\u2019ll help someone else out who is looking to migrate or fix their zwave issues. Like I said, everything just worked, and I didn\u2019t have to reconfigure or repair a single device after migrating to Vmware. If you get it working after following my guide, let me know in the comments! Additional Steps (optional) Click this link to run VMware Workstation 16 in the background and automatically after restarting. Or, if you want to automatically connect your USB dongle to a VMware Workstation VM. My Favorite Home Assistant Devices Below are some of the Home Assistant-compatible devices I personally use in my home. I highly recommend each of them. Zwave/Zigbee hub: Nortek GoControl HUSBZB-1 Smart Plugs: Securifi Peanut plugs Motion Sensors: Hue Indoor Motion Outdoor Camera: Amcrest IP5M Turret Robot Vacuum: Roborock S7 The full list of all Home Assistant compatible & recommended devices I use can be found on my Equipment List page. Alexa I wanted to try Alexa as well to make the voice assistant process easier to install. There are a few statements here I need to remember: Cons - Requires internet to use it all the time - Need Amazon account to work - Cost money to have in each room Pros - Nothing to install it's premade - No skill to develop - Can be integrated for free with Dev lambda function in-home assistant : I've been able to integrate Alexa to Home Assistant and discover my different entities into Alex autodetected. I am using the Lambda function to discuss with the Home assistant. And an Alexa developer account as well. I used Instana AWS account for test but in the futur I will need to use my own account. This solution is 100% FREE. I need a function lambda code: https://gist.github.com/matt2005/744b5ef548cc13d88d0569eea65f5e5b A lambda test code (the quoted code with directive on top): https://www.home-assistant.io/integrations/alexa.smart_home/#test-the-lambda-function Follow this video: https://www.youtube.com/watch?v=Ww2LI59IQ0A&t=389s&ab_channel=EverythingSmartHome There is a bit of port forwarding to do (NAT) explained in the video above. Virgin media hub box is not able to forward mutliple ports to the same 8123 ports. So the idea is actually to forward only the port 443 to 8123. It also means that Homeassistant will be only reachable on 443 and not on 8123 anymore. The difficult parts seems to be the lambda code to test. You can get different error like 401 not authorized because toekn is missing or 404 not found when Alexa is not recognized inside the configuration.yaml file inside Home Assistant. During this test I made use of duckDNS to obtain global IP instead of my local LAN 192.168.0.27. see DuckDNS test. Connecting Home Assistant to send text to speech to Alexa requirements: Amazon echo HACS (Home Assistant community Store):https://hacs.xyz/ Multi-Factor authentication on Amazon account Alexa paired to Home assistant (see above) text to speech: https://www.youtube.com/watch?v=UsnhL2z_UUY&t=571s To send a notification, go to https://havient.duckdns.org/developer-tools/service and select in the search notify. A combo box will appear and select the devices Alexa where to send the notification. all is optional exept data = \"type: tts\" without the quote. I need to check if alexa can say some infomration regarding the house; door is open TV movie is ready to watch Waze timer between 2 distances Waze timer between 2 distances. this is Next: how can we MQTT intent from Alexa to a MQTT broker ? What is compatible ? How to https://www.youtube.com/watch?v=AK5E2T5tWyM&ab_channel=EverythingSmartHome https://www.duckdns.org/ I used my personal gmail account to create the dynamic dns link between home assistant and exernal public network. Duck DNS allows to get a single URL to reach Home assistant. I followed the youtube video, is it straight forward. As explained in Alexa test, Virgin media cannot let us portforward (NAT) multpile ports to one ports so I've chossen to port all on 443 (as required for Alexa lambda function). 5 Back up and restore Home Assistant Backup of your Home Assistant and add-on data and configuration. They are stored in a compressed archive file (.tar). Backups are made from the Supervisor Backups panel. There is also a service available that allows you to trigger the creation of a backup from an automation. Backups are stored in the /backup directory. A full backup includes the following directories: config share addons (only manually installed or created add-ons, not those installed from the store) ssl media A partial backup consists of any number of the above default directories and installed add-ons.","title":"Feature Test"},{"location":"featurehassio/#feature-test","text":"","title":"Feature test"},{"location":"featurehassio/#rhasspy","text":"https://rhasspy.readthedocs.io/en/latest/ Installation via docker on a Linux server is easy, on a windows docker platform, I haven't been able to make it start (need a profile that I don't know how to include in the command). For the rest, the tool is an aggregation of different tools that provide each a functionality : - Speak to text - Text to speech - Audio input - Audio output - Wake word The tool itself looks nice and we can create sentences that can be recognized by rhasspy and perform an action. I couldn't make the microphone and audio work so impossible to test at the moment. I realize that microphone has to be plugged in where the docker rhasspy server is hosted. Need troubleshooting audio input.","title":"Rhasspy"},{"location":"featurehassio/#home-assistant-installation-virtual-machine","text":"I tried Home Assistant on docker version. And it is very easy to install : https://www.home-assistant.io/installation/ But I realized that I am not able with docker version to access addons. Addons is only avaialbe when installing Home Assistant as a VM (Kvm, vmware, virtualbox) or via the raspberry installer. That's probably why there is so much people installing HA from RP4. I continued my search on Vmware home assistant, the VM version is quite complex to install, need to follow this steps : Download Home Assistant .VMDK image Download the Vmware Workstation (.vmdk) image from here: https://www.home-assistant.io/installation/windows The file will be download as a file with a .xz extension which needs to be extracted. To extract it: Download 7zip. Right-click the hass_ova-5.12.vmdk.xz file you just downloaded > 7zip > Open Archive. Then, click Extract. It should extract to a .vmdk file. Rename the file to something like homeassistant.vmdk, and place it into a directory where your VM will live (C:\\HomeAssistant) Step 3: Launch VMware Workstation 16 Player Search your computer for VMware Workstation 16 Player and open. Select the free for non-commercial use option. Click Create a New Virtual Machine Click I will install the operating system later. Select Linux. For the version, you would use Other Linux 5.x and later kernel 64-bit. Give your VM a name (like homeassistant) and select the folder you created in Step 2. Store it as a single file, and set your storage size. I chose 20gb. On the next screen, click Customize Hardware. Memory and CPU can be specified to whatever you want (1gb of RAM and 1CPU is recommended), but the network adapter needs to be set to \u201cbridged\u201d mode. Memory: 2048 CPU: 2 Network Adapter: Choose \u201cBridged\u201d Your VM should now be created. Step 4: Edit VM Settings Navigate back to the C:\\HomeAssistant folder. You will now see two .vmdk files: Delete the homeassistant-0 one (the newly created .VMDK), and rename the homeassistant one to homeassistant-0 (this is the extracted image you downloaded). Then, locate the homeassistant VMware virtual machine configuration file (.vmx). Right-click > Open With > notepad. Under the .encoding line, add the following code and save the file. firmware=\"efi\" Step 5: Start the Virtual Machine Then, click Play Virtual machine or click the green triangle at the top of the window. If you see this message, click Yes. Download and install VMTools. I\u2019m not entirely sure if this was necessary, but I did it anyway: If everything is successful up until this point, you should see the Home Assistant login screen in a command window like below. The default username is root. Logging in will show you your IP address of your new HA virtual machine. In my case, it is 192.168.68.128. It\u2019s not necessary to login if you can get your IP from your router. At this step, you should be able to navigate to http://192.168.68.128:8123 in a web browser. The HA gui will state that it may take up to 20 minutes to complete, but in my experience it took less than 5. While you are waiting, remove your Nortek GoControl zwave/zigbee USB stick from your raspberry pi and plug it into your Windows 10 PC that has VM Workstation Player installed. Windows should detect it automatically and install all necessary drivers. The VMware VM should automatically detect it as well: Once the \u201cit may take 20 minutes to complete\u201d screen goes away, you will see the New User Account screen like the screenshot below. I am restoring from a previous snapshot, so I\u2019m going to choose Alternatively, you can restore from a previous snapshot. After restoring from snapshot, you may notice all of your wifi devices work \u2013 but zwave and zigbee devices don\u2019t. This is because we need to \u201cattach\u201d the Nortek USB dongle to the vm (referred to as USB passthrough). To do this, on the VMware Player window, select Player > Removeable Devices. There should be two Silicon devices. Click each of them > Connect. Testing It Out If all has gone well so far, you can now test things out. Toggle a few lights, switches, and motion sensors. If you have any secure nodes, like a smart door lock, you should test those as well. The last thing you\u2019ll need to do is either the change the internal IP address in your Home Assistant Mobile app (under App Configuration in the sidebar) or change the IP address of your VM to the old IP address. Wrapping Up All in all, I spent entirely too much time trying to figure out all the nuances of getting this working, particularly extracting the .vmdk file, deleting the old .vmdk, and then discovering that I needed to edit the .vmx file to allow it to secure boot. So, I decided to document each step of the process as I went, with the hopes that it\u2019ll help someone else out who is looking to migrate or fix their zwave issues. Like I said, everything just worked, and I didn\u2019t have to reconfigure or repair a single device after migrating to Vmware. If you get it working after following my guide, let me know in the comments! Additional Steps (optional) Click this link to run VMware Workstation 16 in the background and automatically after restarting. Or, if you want to automatically connect your USB dongle to a VMware Workstation VM. My Favorite Home Assistant Devices Below are some of the Home Assistant-compatible devices I personally use in my home. I highly recommend each of them. Zwave/Zigbee hub: Nortek GoControl HUSBZB-1 Smart Plugs: Securifi Peanut plugs Motion Sensors: Hue Indoor Motion Outdoor Camera: Amcrest IP5M Turret Robot Vacuum: Roborock S7 The full list of all Home Assistant compatible & recommended devices I use can be found on my Equipment List page.","title":"Home Assistant installation Virtual Machine"},{"location":"featurehassio/#alexa","text":"I wanted to try Alexa as well to make the voice assistant process easier to install. There are a few statements here I need to remember: Cons - Requires internet to use it all the time - Need Amazon account to work - Cost money to have in each room Pros - Nothing to install it's premade - No skill to develop - Can be integrated for free with Dev lambda function in-home assistant : I've been able to integrate Alexa to Home Assistant and discover my different entities into Alex autodetected. I am using the Lambda function to discuss with the Home assistant. And an Alexa developer account as well. I used Instana AWS account for test but in the futur I will need to use my own account. This solution is 100% FREE. I need a function lambda code: https://gist.github.com/matt2005/744b5ef548cc13d88d0569eea65f5e5b A lambda test code (the quoted code with directive on top): https://www.home-assistant.io/integrations/alexa.smart_home/#test-the-lambda-function Follow this video: https://www.youtube.com/watch?v=Ww2LI59IQ0A&t=389s&ab_channel=EverythingSmartHome There is a bit of port forwarding to do (NAT) explained in the video above. Virgin media hub box is not able to forward mutliple ports to the same 8123 ports. So the idea is actually to forward only the port 443 to 8123. It also means that Homeassistant will be only reachable on 443 and not on 8123 anymore. The difficult parts seems to be the lambda code to test. You can get different error like 401 not authorized because toekn is missing or 404 not found when Alexa is not recognized inside the configuration.yaml file inside Home Assistant. During this test I made use of duckDNS to obtain global IP instead of my local LAN 192.168.0.27. see DuckDNS test. Connecting Home Assistant to send text to speech to Alexa requirements: Amazon echo HACS (Home Assistant community Store):https://hacs.xyz/ Multi-Factor authentication on Amazon account Alexa paired to Home assistant (see above) text to speech: https://www.youtube.com/watch?v=UsnhL2z_UUY&t=571s To send a notification, go to https://havient.duckdns.org/developer-tools/service and select in the search notify. A combo box will appear and select the devices Alexa where to send the notification. all is optional exept data = \"type: tts\" without the quote. I need to check if alexa can say some infomration regarding the house; door is open TV movie is ready to watch Waze timer between 2 distances Waze timer between 2 distances. this is Next: how can we MQTT intent from Alexa to a MQTT broker ? What is compatible ? How to https://www.youtube.com/watch?v=AK5E2T5tWyM&ab_channel=EverythingSmartHome https://www.duckdns.org/ I used my personal gmail account to create the dynamic dns link between home assistant and exernal public network. Duck DNS allows to get a single URL to reach Home assistant. I followed the youtube video, is it straight forward. As explained in Alexa test, Virgin media cannot let us portforward (NAT) multpile ports to one ports so I've chossen to port all on 443 (as required for Alexa lambda function). 5 Back up and restore Home Assistant Backup of your Home Assistant and add-on data and configuration. They are stored in a compressed archive file (.tar). Backups are made from the Supervisor Backups panel. There is also a service available that allows you to trigger the creation of a backup from an automation. Backups are stored in the /backup directory. A full backup includes the following directories: config share addons (only manually installed or created add-ons, not those installed from the store) ssl media A partial backup consists of any number of the above default directories and installed add-ons.","title":"Alexa"},{"location":"homeassistant/","text":"Home Assistant Entity naming convention ROOM_DEVICES_POSITON-IN-THE-ROOM Security Cameras double stack combine NVR and face recognition deepstack for recognition frigate for NVR https://youtu.be/_61-hIL1AjQ Backup Once the installation of HASSio is done, must put in place backup system. Back up and restore Home Assistant Backup of your Home Assistant and add-on data and configuration. They are stored in a compressed archive file (.tar). Backups are made from the Supervisor Backups panel. There is also a service available that allows you to trigger the creation of a backup from an automation. Backups are stored in the /backup directory. A full backup includes the following directories: - config - share - addons (only manually installed or created add-ons, not those installed from the store) - ssl - media A partial backup consists of any number of the above default directories and installed add-ons. Backup from the UI Go to Configuration > Add-ons & Backups > Backups in the UI. Provide a name for the backup. Choose full or partial. Choose to password protect or not. Password-protected backups cannot easily be browsed outside of Home Assistant OS. Click \u201cCreate\u201d to begin the backup. Restoring backup after new install You can make use of backup which you have copied off of a previous install to restore to a new installation during the onboarding process. Follow the link at the bottom of the account creation page to upload your backup from the previous installation. For restoring a backup at any other time, visit the Supervisor backup panel in your UI and use the following steps: - Select \u201cUpload Backup\u201d from the icon in the upper right of the page. - Click on the folder icon to navigate to your backup .tar file and select it. When the upload is completed, you will be presented with the backup restore dialog for restoring it, and can then choose to restore in full or in part by manually selecting individual items. If the backup you are uploading is more than 1GB in size, it can be faster and more efficient to make use of the Samba add-on in order to transfer files to the /backup directory. The length of time it takes to create or restore backup will depend on how much you have to compress or decompress. If you\u2019re looking to slim down your backup, check if your configuration directory contains a large database file (home-assistant_v2.db). See the recorder integration page for options to keep your database data down to a size that won\u2019t cause issues. Note the keep days, purge interval, and include/exclude options. When the restore is complete, Home Assistant will restart to apply the new settings. You will lose the connection to the UI and it will return once the restart is completed. --> Can also use the CLI commande to do so. Copy to another distant location Copy the back to Sysnology NAS via SMB share. Very easy to do. https://github.com/thomasmauerer/hassio-addons/tree/master/samba-backup The end of this video shows how to add a back up entity on the Home assistant dashboard: https://www.youtube.com/watch?v=bY39OpoN8OM&t=956s Configuration that worked: host: 192.168.0.20 share: Sauvegarde_distante target_dir: /HomeAssistant username: admin password: mdpnormal keep_local: 0 keep_remote: 2 trigger_time: '00:00' trigger_days: - Mon - Tue - Wed - Thu - Fri - Sat - Sun exclude_addons: [] exclude_folders: [] Logs: [s6-init] making user provided files available at /var/run/s6/etc...exited 0. [s6-init] ensuring user provided files have correct perms...exited 0. [fix-attrs.d] applying ownership & permissions fixes... [fix-attrs.d] done. [cont-init.d] executing container initialization scripts... [cont-init.d] done. [services.d] starting services [services.d] done. [22-03-14 18:15:43] INFO: --------------------------------------------------- [22-03-14 18:15:43] INFO: Host/Share: 192.168.0.20/Sauvegarde_distante [22-03-14 18:15:43] INFO: Target directory: /HomeAssistant [22-03-14 18:15:43] INFO: Keep local/remote: 0/2 [22-03-14 18:15:43] INFO: Trigger time: 18:20 [22-03-14 18:15:43] INFO: Trigger days: Mon Tue Wed Thu Fri Sat Sun [22-03-14 18:15:43] INFO: --------------------------------------------------- [22-03-14 18:15:46] INFO: Samba Backup started successfully [22-03-14 18:20:46] INFO: Backup running ... [22-03-14 18:20:46] INFO: Creating backup \"Samba Backup 2022-03-14 18:20\" [22-03-14 18:20:48] INFO: Copying backup d4aec165 (Samba_Backup_2022_03_14_18_20.tar) to share [22-03-14 18:20:49] INFO: Deleting d4aec165 (Samba Backup 2022-03-14 18:20) local [22-03-14 18:21:02] INFO: Backup finished create a manual back-up We need to create a script and execute it. service: hassio.addon_stdin data: addon: 15d21743_samba_backup input: trigger HACS Home Assistant Community Store https://hacs.xyz/ This is a library of github repositories for bakend integration and front end view (themes.... ). I found usefull : Front end : Tracking Number Card for Home Assistant scheduler-card Travel Time Card for Home Assistant Integrations : Car Wash Amazon Rekognition Office 365 Integration for Home Assistant Nespresso Ble coffee machine Zigbee Home Assistant (ZHA) Plugin the Sonoff Zigbee dongle on the Home Assistant and restart the Home assistant. By doing that I have automatically discovered the dongle into Home Assistant. Once clicked on Configure there is a step to automatically install the dongle. This is a successful install : https://sonoff.tech/product-review/sonoff-zigbee-3-0-usb-dongle-plus-tutorials/ give us the next step to add devices. Add sub-devices to the gateway dongle Make the sub-devices enter the pairing mode, and you can control it after adding successfully Mirror https://youtu.be/RM3Xvo08t10 https://magicmirror.builders/ https://docs.magicmirror.builders/getting-started/installation.html#manual-installation Automatic Installation Scripts Sam (@sdetweil, long time contributor of the MagicMirror\u00b2 framework) maintains a easy to use installation and update script: https://github.com/sdetweil/MagicMirror_scripts The MagicMirror Package Manager is a command line interface designed to simplify the installation, removal, and maintenance of MagicMirror modules My feedback and questions: je ne comprends pas comment imbriquer les briques d'automation les unes aux autres. Je veux cr\u00e9er des briques d'automations \u00e9l\u00e9mentaires pour les cascader et arriver \u00e0 un mod\u00e8le complexe Sous quel forme se pr\u00e9sente ces briques \u00e9l\u00e9mentaire dans Home Assistant ? Node red offre-t-il un affichage \"human readable\" que Home assistant n'offre pas ? Est-e que HA sait d\u00e9clencher des automations sur des evenements ? Fonctionement en machine d'\u00e9tat posible ??","title":"Home Assistant"},{"location":"homeassistant/#home-assistant","text":"","title":"Home Assistant"},{"location":"homeassistant/#entity-naming-convention","text":"ROOM_DEVICES_POSITON-IN-THE-ROOM","title":"Entity naming convention"},{"location":"homeassistant/#security-cameras","text":"double stack combine NVR and face recognition deepstack for recognition frigate for NVR https://youtu.be/_61-hIL1AjQ","title":"Security Cameras"},{"location":"homeassistant/#backup","text":"Once the installation of HASSio is done, must put in place backup system. Back up and restore Home Assistant Backup of your Home Assistant and add-on data and configuration. They are stored in a compressed archive file (.tar). Backups are made from the Supervisor Backups panel. There is also a service available that allows you to trigger the creation of a backup from an automation. Backups are stored in the /backup directory. A full backup includes the following directories: - config - share - addons (only manually installed or created add-ons, not those installed from the store) - ssl - media A partial backup consists of any number of the above default directories and installed add-ons.","title":"Backup"},{"location":"homeassistant/#backup-from-the-ui","text":"Go to Configuration > Add-ons & Backups > Backups in the UI. Provide a name for the backup. Choose full or partial. Choose to password protect or not. Password-protected backups cannot easily be browsed outside of Home Assistant OS. Click \u201cCreate\u201d to begin the backup.","title":"Backup from the UI"},{"location":"homeassistant/#restoring-backup-after-new-install","text":"You can make use of backup which you have copied off of a previous install to restore to a new installation during the onboarding process. Follow the link at the bottom of the account creation page to upload your backup from the previous installation. For restoring a backup at any other time, visit the Supervisor backup panel in your UI and use the following steps: - Select \u201cUpload Backup\u201d from the icon in the upper right of the page. - Click on the folder icon to navigate to your backup .tar file and select it. When the upload is completed, you will be presented with the backup restore dialog for restoring it, and can then choose to restore in full or in part by manually selecting individual items. If the backup you are uploading is more than 1GB in size, it can be faster and more efficient to make use of the Samba add-on in order to transfer files to the /backup directory. The length of time it takes to create or restore backup will depend on how much you have to compress or decompress. If you\u2019re looking to slim down your backup, check if your configuration directory contains a large database file (home-assistant_v2.db). See the recorder integration page for options to keep your database data down to a size that won\u2019t cause issues. Note the keep days, purge interval, and include/exclude options. When the restore is complete, Home Assistant will restart to apply the new settings. You will lose the connection to the UI and it will return once the restart is completed. --> Can also use the CLI commande to do so.","title":"Restoring backup after new install"},{"location":"homeassistant/#copy-to-another-distant-location","text":"Copy the back to Sysnology NAS via SMB share. Very easy to do. https://github.com/thomasmauerer/hassio-addons/tree/master/samba-backup The end of this video shows how to add a back up entity on the Home assistant dashboard: https://www.youtube.com/watch?v=bY39OpoN8OM&t=956s Configuration that worked: host: 192.168.0.20 share: Sauvegarde_distante target_dir: /HomeAssistant username: admin password: mdpnormal keep_local: 0 keep_remote: 2 trigger_time: '00:00' trigger_days: - Mon - Tue - Wed - Thu - Fri - Sat - Sun exclude_addons: [] exclude_folders: [] Logs: [s6-init] making user provided files available at /var/run/s6/etc...exited 0. [s6-init] ensuring user provided files have correct perms...exited 0. [fix-attrs.d] applying ownership & permissions fixes... [fix-attrs.d] done. [cont-init.d] executing container initialization scripts... [cont-init.d] done. [services.d] starting services [services.d] done. [22-03-14 18:15:43] INFO: --------------------------------------------------- [22-03-14 18:15:43] INFO: Host/Share: 192.168.0.20/Sauvegarde_distante [22-03-14 18:15:43] INFO: Target directory: /HomeAssistant [22-03-14 18:15:43] INFO: Keep local/remote: 0/2 [22-03-14 18:15:43] INFO: Trigger time: 18:20 [22-03-14 18:15:43] INFO: Trigger days: Mon Tue Wed Thu Fri Sat Sun [22-03-14 18:15:43] INFO: --------------------------------------------------- [22-03-14 18:15:46] INFO: Samba Backup started successfully [22-03-14 18:20:46] INFO: Backup running ... [22-03-14 18:20:46] INFO: Creating backup \"Samba Backup 2022-03-14 18:20\" [22-03-14 18:20:48] INFO: Copying backup d4aec165 (Samba_Backup_2022_03_14_18_20.tar) to share [22-03-14 18:20:49] INFO: Deleting d4aec165 (Samba Backup 2022-03-14 18:20) local [22-03-14 18:21:02] INFO: Backup finished","title":"Copy to another distant location"},{"location":"homeassistant/#create-a-manual-back-up","text":"We need to create a script and execute it. service: hassio.addon_stdin data: addon: 15d21743_samba_backup input: trigger","title":"create a manual back-up"},{"location":"homeassistant/#hacs-home-assistant-community-store","text":"https://hacs.xyz/ This is a library of github repositories for bakend integration and front end view (themes.... ). I found usefull : Front end : Tracking Number Card for Home Assistant scheduler-card Travel Time Card for Home Assistant Integrations : Car Wash Amazon Rekognition Office 365 Integration for Home Assistant Nespresso Ble coffee machine","title":"HACS Home Assistant Community Store"},{"location":"homeassistant/#zigbee-home-assistant-zha","text":"Plugin the Sonoff Zigbee dongle on the Home Assistant and restart the Home assistant. By doing that I have automatically discovered the dongle into Home Assistant. Once clicked on Configure there is a step to automatically install the dongle. This is a successful install : https://sonoff.tech/product-review/sonoff-zigbee-3-0-usb-dongle-plus-tutorials/ give us the next step to add devices. Add sub-devices to the gateway dongle Make the sub-devices enter the pairing mode, and you can control it after adding successfully","title":"Zigbee Home Assistant (ZHA)"},{"location":"homeassistant/#mirror","text":"https://youtu.be/RM3Xvo08t10 https://magicmirror.builders/ https://docs.magicmirror.builders/getting-started/installation.html#manual-installation Automatic Installation Scripts Sam (@sdetweil, long time contributor of the MagicMirror\u00b2 framework) maintains a easy to use installation and update script: https://github.com/sdetweil/MagicMirror_scripts The MagicMirror Package Manager is a command line interface designed to simplify the installation, removal, and maintenance of MagicMirror modules","title":"Mirror"},{"location":"homeassistant/#my-feedback-and-questions","text":"je ne comprends pas comment imbriquer les briques d'automation les unes aux autres. Je veux cr\u00e9er des briques d'automations \u00e9l\u00e9mentaires pour les cascader et arriver \u00e0 un mod\u00e8le complexe Sous quel forme se pr\u00e9sente ces briques \u00e9l\u00e9mentaire dans Home Assistant ? Node red offre-t-il un affichage \"human readable\" que Home assistant n'offre pas ? Est-e que HA sait d\u00e9clencher des automations sur des evenements ? Fonctionement en machine d'\u00e9tat posible ??","title":"My feedback and questions:"},{"location":"homelab/","text":"configuration of my linux docker system needs keyboard in french apt update create an account that can do root stuff always install ssh install docker git to manage configuration file of linux Link .bashrc any other file visudo","title":"Home Lab"},{"location":"homelab/#configuration-of-my-linux-docker-system","text":"needs keyboard in french apt update create an account that can do root stuff always install ssh install docker git to manage configuration file of linux Link .bashrc any other file visudo","title":"configuration of my linux docker system"},{"location":"network/","text":"Network Not to forget PFS Sense : https://www.youtube.com/watch?v=lUzSsX4T4WQ&ab_channel=NetworkChuck Pihole: https://www.youtube.com/watch?v=4X6KYN1cQ1Y&ab_channel=Goose need ubiquitin Unifi because Virgin media box is shit and you can't disable DNS.... IP Static Hostname IP switch Dell .3 Imprimante Bureau .4 Home Assistant rpi4 .5 PC Thomas .6 AP Wifi 6 .7 Shield TV Pro .8 NAS Synology .15 Unifi Security Gateway and Access Points The USG is controlled by a docker unify Network software hosted on Home Assistant. To manage USG and access points, we needs to adopt them from the software. To ssh to a USG or AP when not adopted yet, we need to use default manufacturer credential (easy to find on internet), if the device is adopted already, then credential are stored in the advanced settings of the unify network software. When adopting, you must inform the USG or AP where to be paired. either by SSHing on the AP/USG and enter the command \"set-inform http:// :8080/inform\" or search for word override and enter the IP of the Unify Network Software, it will automatically override the value when adopting new devices and constantly update already paired AP and USG. Some configuration statements: Virgin Media Box in Modem Mode USG in default configuration Dell Open Manage in default configuration credential to login the unify controller are stored in IBM 1password DHCP is hosted by USG Reverse proxy ? I found possibility not to use reverse proxy link","title":"Network"},{"location":"network/#network","text":"","title":"Network"},{"location":"network/#not-to-forget","text":"PFS Sense : https://www.youtube.com/watch?v=lUzSsX4T4WQ&ab_channel=NetworkChuck Pihole: https://www.youtube.com/watch?v=4X6KYN1cQ1Y&ab_channel=Goose need ubiquitin Unifi because Virgin media box is shit and you can't disable DNS....","title":"Not to forget"},{"location":"network/#ip-static","text":"Hostname IP switch Dell .3 Imprimante Bureau .4 Home Assistant rpi4 .5 PC Thomas .6 AP Wifi 6 .7 Shield TV Pro .8 NAS Synology .15","title":"IP Static"},{"location":"network/#unifi-security-gateway-and-access-points","text":"The USG is controlled by a docker unify Network software hosted on Home Assistant. To manage USG and access points, we needs to adopt them from the software. To ssh to a USG or AP when not adopted yet, we need to use default manufacturer credential (easy to find on internet), if the device is adopted already, then credential are stored in the advanced settings of the unify network software. When adopting, you must inform the USG or AP where to be paired. either by SSHing on the AP/USG and enter the command \"set-inform http:// :8080/inform\" or search for word override and enter the IP of the Unify Network Software, it will automatically override the value when adopting new devices and constantly update already paired AP and USG. Some configuration statements: Virgin Media Box in Modem Mode USG in default configuration Dell Open Manage in default configuration credential to login the unify controller are stored in IBM 1password DHCP is hosted by USG","title":"Unifi Security Gateway and Access Points"},{"location":"network/#reverse-proxy","text":"I found possibility not to use reverse proxy link","title":"Reverse proxy ?"}]}